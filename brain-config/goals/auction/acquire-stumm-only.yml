name: Acquire Stumm
requirements:
  allOf:
    - elementId: locationauctionhouse
    - elementId: genericrubbishbook
completedWhen:
  elementId: ritefollowerconsumeinfluence
impulses:
  - name: Purchase STUMM! at auction
    priority: goal
    requirements: !import /conditions/has-slushfund-major.yml
    forbidders:
      anyOf:
        - elementId: stumm
        - elementId: ritefollowerconsumeinfluence
        # Don't peek into the auction when we have yet to exhaust the bookdealer, or it might spawn
        # unique books we want from the dealer that will never appear again.
        - elementId: locationbookdealer
    operation: !import /operations/auction-purchase-stumm.yml
  - name: Watch Stumm
    priority: goal
    requirements: !import /conditions/has-slushfund-minor.yml
    operation: !import /operations/watch-stumm.yml
