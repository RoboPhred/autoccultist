name: Upgrade all Grail lore
completedWhen:
  noneOf:
    - cardSet:
        - elementId: fragmentgrail
        - elementId: fragmentgrail
    - cardSet:
        - elementId: fragmentgrailb
        - elementId: fragmentgrailb
    - cardSet:
        - elementId: fragmentgrailc
        - elementId: fragmentgrailc
    - cardSet:
        - elementId: fragmentgraild
        - elementId: fragmentgraild
    - allOf:
        - cardSet:
            - elementId: fragmentgraile
            - elementId: fragmentgraile
        - anyOf:
            - elementId: skillpassiond_folly
            - aspects: { sanctuary: 1 }
    - allOf:
        - cardSet:
            - elementId: fragmentgrailf
            - elementId: fragmentgrailf
        - anyOf:
            - elementId: skillpassiond_folly
            - aspects: { sanctuary: 1 }
        - noneOf:
            - elementId: fragmentgrailg
impulses:
  - name: Ensure we have glimmering
    priority: maintenance
    forbidders:
      !import ../../conditions/can-answer-challenge-intuition.yml
    operation: !import ../../operations/passion/study-passion.yml

  - name: Combine Grail A
    requirements:
      !import ../../conditions/can-answer-challenge-intuition.yml
    operation: !import ../../operations/lore/grail/lore-combine-grail-a.yml

  - name: Combine Grail B
    requirements:
      !import ../../conditions/can-answer-challenge-intuition.yml
    operation: !import ../../operations/lore/grail/lore-combine-grail-b.yml

  - name: Combine Grail C
    requirements:
      !import ../../conditions/can-answer-challenge-intuition.yml
    operation: !import ../../operations/lore/grail/lore-combine-grail-c.yml

  - name: Combine Grail D
    requirements:
      !import ../../conditions/can-answer-challenge-intuition.yml
    operation: !import ../../operations/lore/grail/lore-combine-grail-d.yml

  - name: Combine Grail E
    requirements:
      allOf:
        - !import ../../conditions/can-answer-challenge-intuition.yml
        - anyOf:
            - elementId: skillpassiond_folly
            - aspects: { sanctuary: 1 }
    operation: !import ../../operations/lore/grail/lore-combine-grail-e.yml

  - name: Combine Grail F
    requirements:
      allOf:
        - !import ../../conditions/can-answer-challenge-intuition.yml
        - anyOf:
            - elementId: skillpassiond_folly
            - aspects: { sanctuary: 1 }
    forbidders:
      elementId: fragmentgrailg
    operation: !import ../../operations/lore/grail/lore-combine-grail-f.yml
